单例:一个类只允许创建一个对象(实例)


解决问题：
1.处理资源访问冲突
    对象级别的——锁
    类级别的——单例（不用创建那么多对象，节约内存空间，节约句柄）

2.表示全局唯一类
    配置信息类


创建方式：
1.饿汉式
    在类加载时，instance静态实例就已经创建并初始化好了，所以instance实例是线程安全
        1.从名称中就知道不支持延迟加载，
        2.如果是执行需要耗费时间较长就不应该放到延迟加载中.按照fail-fast设计原则(有问题及早暴露)
            如果资源不够提前报错修复避免运行过程中出错
2.懒汉式
     在需要用到的时候进行加载
        1.不支持高并发，需要加锁(在获取单例的时候加锁)
3.双重检测
    解决饿汉式不支持延迟加载，懒汉式不支持高并发
        1.不在获取单例时候加锁
        2.在创建单例的时候加锁
    
4.静态内部类（部分语言支持）
5.枚举（部分语言支持）


存在的问题：
1.单例对oop（面向对象）的特性不友好
    抽象（违背了基于接口设计而非实现设计原则）
        如有一天需要抽象出不同业务采用不同的单例，那么每个地方都需要修改
    继承，多态不友好(一旦选择单例，就意味放弃继承，多态)
        可以实现，但是会导致使用起来非常奇怪，可读性差
2.单例会隐藏类之间的依赖关系
    正常可通过构造函数，参数传递的方式声明类之间的依赖关系，由于单例不需要显示创建、依赖参数传递
        如果代码比较复杂，这种调用关系就非常隐蔽，需要仔细看每个函数的实现
3.单例对代码的扩展性不好
    如果某一天在代码中需要创建多个个对象，那么代码就有较大的改动（单对象改为线程池）
4.对代码可测试性不友好
    由于单例中的成员变量是全局变量的，就可能不同的操作影响到该成员变量的值


推荐单例的场景:
    1.没有后续的扩展需求，并且不依赖外部系统


    
    

